1
00:00:00,000 --> 00:00:06,620
第一个问题是说现在拍torch是不是支持负数神级网络

2
00:00:06,620 --> 00:00:09,359
也就是他的都是负数

3
00:00:09,359 --> 00:00:12,560
Loss是一个负数到实数的映射

4
00:00:12,560 --> 00:00:16,640
我觉得应该是不支持的

5
00:00:16,640 --> 00:00:21,679
负数我觉得应该是不支持

6
00:00:21,679 --> 00:00:22,960
但是你负数的话

7
00:00:22,960 --> 00:00:24,839
因为负数说白了就是两个

8
00:00:24,839 --> 00:00:26,839
就是两个把一个数变成两维

9
00:00:27,359 --> 00:00:30,839
你其实可以通过把它做到两维

10
00:00:30,839 --> 00:00:33,759
就加一个第二维来实现你要的效果

11
00:00:33,759 --> 00:00:35,480
就是你必须一定要搞到负数

12
00:00:38,679 --> 00:00:40,920
第二个问题是说

13
00:00:40,920 --> 00:00:44,879
如果为什么参数不大

14
00:00:44,879 --> 00:00:46,679
复杂度就低呢

15
00:00:46,679 --> 00:00:48,560
他其实不是说参数不大

16
00:00:48,560 --> 00:00:49,719
复杂度就低

17
00:00:49,719 --> 00:00:53,600
就是说我限制你整个模型在优化的时候

18
00:00:53,640 --> 00:00:56,840
只在一个很小的范围里面去参数

19
00:00:59,520 --> 00:01:02,719
就说如果你在比较小的范围取参数

20
00:01:02,719 --> 00:01:05,200
那么你的整个模型就不会

21
00:01:05,200 --> 00:01:07,400
你的空间就会变小

22
00:01:07,400 --> 00:01:08,640
举一个最简单的例子

23
00:01:08,640 --> 00:01:10,760
其实我们有一个画了一个很小的图

24
00:01:10,760 --> 00:01:13,120
但我没有解释的一个图就是这个图

25
00:01:14,120 --> 00:01:14,599
就这个图

26
00:01:15,680 --> 00:01:16,200
拿个笔

27
00:01:18,159 --> 00:01:21,840
就是说如果你要理和这些点的话

28
00:01:21,840 --> 00:01:23,079
这些红色点的话

29
00:01:23,880 --> 00:01:26,560
如果我可以允许我的模型参数选的比较大

30
00:01:26,560 --> 00:01:29,360
我可以做一个任何的一个很复杂的一个

31
00:01:29,360 --> 00:01:30,800
曲线式的理和

32
00:01:31,160 --> 00:01:32,320
就是说在模型

33
00:01:32,640 --> 00:01:35,080
同样是二次模型或者三次模型情况下

34
00:01:35,080 --> 00:01:37,640
假设我的权重可以取得很大很小的话

35
00:01:37,640 --> 00:01:40,240
那么可以造成一个非常不平滑的一个曲线

36
00:01:41,880 --> 00:01:43,600
那么现在是说我限制你

37
00:01:43,600 --> 00:01:46,360
这个weight不能换太大

38
00:01:46,360 --> 00:01:49,200
就是说你只能在一些比较平滑的曲线里面选

39
00:01:49,200 --> 00:01:51,320
我不让你去学

40
00:01:51,320 --> 00:01:53,480
特别大的一些曲线

41
00:01:54,520 --> 00:01:58,480
那么就意味着是说你的模型复杂的就

42
00:01:58,480 --> 00:01:58,880
遍地

43
00:01:59,400 --> 00:02:01,160
就是说你学不出特别复杂的模型

44
00:02:01,160 --> 00:02:03,320
我只让你选择比较简单的模型

45
00:02:03,320 --> 00:02:04,200
是这个意思

46
00:02:13,200 --> 00:02:15,360
如果是用L1

47
00:02:15,360 --> 00:02:16,600
范数的话

48
00:02:16,600 --> 00:02:17,760
如何更新权重

49
00:02:17,760 --> 00:02:19,040
如果是L1的话

50
00:02:19,040 --> 00:02:20,080
其实你一样的更新

51
00:02:20,080 --> 00:02:21,640
就是说大家可以试一下

52
00:02:21,680 --> 00:02:23,640
这个是一个很好的练习题

53
00:02:24,000 --> 00:02:24,840
就是说

54
00:02:25,920 --> 00:02:27,640
你就把之前

55
00:02:30,840 --> 00:02:31,720
就是

56
00:02:33,400 --> 00:02:34,240
这个地方

57
00:02:37,680 --> 00:02:40,520
你把它换成一个

58
00:02:40,800 --> 00:02:41,640
TouchIBS

59
00:02:41,640 --> 00:02:44,960
对吧

60
00:02:44,960 --> 00:02:52,400
然后就换了个东西

61
00:02:52,400 --> 00:02:53,400
然后

62
00:02:53,439 --> 00:02:55,760
然后这个就不要除二了

63
00:02:56,439 --> 00:02:58,760
那就是当然你这个东西得改成L1 penalty

64
00:02:58,760 --> 00:02:59,159
对吧

65
00:03:01,120 --> 00:03:02,000
就大家可以试一下

66
00:03:02,000 --> 00:03:03,200
这个改一下这个东西

67
00:03:03,200 --> 00:03:04,439
一定大家去试

68
00:03:04,439 --> 00:03:05,319
你不要看着我试

69
00:03:05,319 --> 00:03:06,240
看我试有什么用

70
00:03:06,240 --> 00:03:08,439
你自己去试一下

71
00:03:08,439 --> 00:03:10,080
看看效果怎么样

72
00:03:10,120 --> 00:03:11,719
很有可能效果差不多

73
00:03:11,719 --> 00:03:13,159
在这个问题上

74
00:03:13,919 --> 00:03:17,079
但是我绝对鼓励大家去手动试

75
00:03:17,079 --> 00:03:19,759
我只是给大家演示一下

76
00:03:19,759 --> 00:03:21,560
就正常怎么做

77
00:03:21,560 --> 00:03:22,759
这里面代码是什么意思

78
00:03:22,759 --> 00:03:25,519
但是说给大家看代码的主要的目的

79
00:03:25,519 --> 00:03:27,439
是大家可以拿去自己玩

80
00:03:31,039 --> 00:03:34,439
对实际中的权重衰退一般取多少

81
00:03:34,439 --> 00:03:36,639
其实一般取个

82
00:03:36,680 --> 00:03:38,199
一般是取

83
00:03:40,439 --> 00:03:41,159
一

84
00:03:43,159 --> 00:03:45,759
一般是取1-3 1-4

85
00:03:48,039 --> 00:03:49,000
就是说

86
00:03:49,039 --> 00:03:52,000
1-2 1-3 1-4

87
00:03:52,000 --> 00:03:53,560
就0.01

88
00:03:53,560 --> 00:03:54,759
0.001

89
00:03:54,759 --> 00:03:56,000
0.0001

90
00:03:56,000 --> 00:03:57,479
就是那么几个选项

91
00:03:58,919 --> 00:04:00,840
之前在跑代码的时候

92
00:04:00,840 --> 00:04:03,240
感觉权重衰退效果并没有那么好

93
00:04:03,240 --> 00:04:05,719
其实权重衰退效果有一点点

94
00:04:05,719 --> 00:04:07,439
但你不要太指望

95
00:04:07,639 --> 00:04:10,680
我们会在之后再介绍更多的手段

96
00:04:10,680 --> 00:04:13,960
给大家来做模型复杂度控制

97
00:04:13,960 --> 00:04:16,680
权重衰退确实它就那么一点点效果

98
00:04:17,680 --> 00:04:20,040
所以很有可能你稍微调一下体力

99
00:04:20,040 --> 00:04:20,480
一般来说

100
00:04:20,480 --> 00:04:21,879
你取个1-3也就行了

101
00:04:21,879 --> 00:04:23,960
就是你不要觉得

102
00:04:24,000 --> 00:04:25,160
如果就是说

103
00:04:25,160 --> 00:04:26,759
如果你的模型真的很复杂

104
00:04:26,759 --> 00:04:28,480
权重衰退不会给你带来

105
00:04:28,480 --> 00:04:29,720
特别特别好的效果

106
00:04:32,120 --> 00:04:35,240
可能你特别是对于什么MLP来讲

107
00:04:35,240 --> 00:04:37,360
可能之后我们接下来我们要讲的

108
00:04:37,399 --> 00:04:39,480
dropout可能效果还好一点

109
00:04:40,759 --> 00:04:41,639
所以就是说大家

110
00:04:41,639 --> 00:04:44,720
我就建议大家可以是1-2 1-3

111
00:04:45,000 --> 00:04:47,160
或者说你就默认开着1-3

112
00:04:47,600 --> 00:04:48,160
也就行了

113
00:04:48,199 --> 00:04:48,800
如果效果不好

114
00:04:48,840 --> 00:04:49,840
你就换别的方法

115
00:04:57,560 --> 00:05:00,319
为什么损失函数正者向中的2

116
00:05:00,319 --> 00:05:01,879
为什么使用的是上标

117
00:05:01,879 --> 00:05:02,960
而不是下标

118
00:05:05,079 --> 00:05:06,240
就是说

119
00:05:06,439 --> 00:05:08,480
我在想你所谓的上标

120
00:05:08,480 --> 00:05:10,319
是讲我这个是怎么写的

121
00:05:10,319 --> 00:05:10,920
是吧

122
00:05:11,319 --> 00:05:12,200
就是说

123
00:05:16,879 --> 00:05:17,879
就我其实就是说

124
00:05:17,879 --> 00:05:19,480
你说为什么用的这个地方

125
00:05:19,480 --> 00:05:21,120
这个是个上标是吧

126
00:05:21,480 --> 00:05:22,439
这个上标

127
00:05:22,480 --> 00:05:24,800
不是这个上标是个平方的意思

128
00:05:24,960 --> 00:05:25,759
就是说

129
00:05:25,920 --> 00:05:28,120
其实理论上这里应该有一个下标

130
00:05:28,200 --> 00:05:29,680
我就偷懒没写了

131
00:05:29,720 --> 00:05:30,400
就是

132
00:05:30,920 --> 00:05:32,080
这才是L

133
00:05:32,520 --> 00:05:33,600
L too long

134
00:05:33,680 --> 00:05:37,120
就是表示你这是个L too的一个范数

135
00:05:39,000 --> 00:05:40,920
但是L too是默认的范数

136
00:05:40,920 --> 00:05:42,640
所以对象来讲

137
00:05:42,640 --> 00:05:43,600
L too就是默认的

138
00:05:43,600 --> 00:05:45,120
所以你这里不写是没关系的

139
00:05:45,120 --> 00:05:46,920
就是我只是把它忽略掉了

140
00:05:47,600 --> 00:05:49,800
这个平方这个东西不是讲是L too的

141
00:05:49,800 --> 00:05:50,120
象

142
00:05:50,160 --> 00:05:51,400
是是个平方向

143
00:05:51,600 --> 00:05:53,720
就是说我们这里用的是L

144
00:05:54,240 --> 00:05:55,480
too就L2的

145
00:05:56,319 --> 00:05:58,840
范数的平方作为我的法

146
00:05:59,240 --> 00:06:00,240
所以这个2是平方

147
00:06:00,400 --> 00:06:03,200
不是L2里面的2

148
00:06:05,240 --> 00:06:05,720
OK

149
00:06:08,480 --> 00:06:15,480
就为什么会要把W往小拉

150
00:06:15,480 --> 00:06:18,360
如果最优级的W就是比较大的

151
00:06:18,640 --> 00:06:19,200
数

152
00:06:19,200 --> 00:06:21,920
那么权重衰退是不是有反作用

153
00:06:22,680 --> 00:06:24,280
这也是个挺好的问题

154
00:06:24,520 --> 00:06:25,280
就是说

155
00:06:26,280 --> 00:06:28,439
就我还是回到之前的图

156
00:06:30,560 --> 00:06:33,520
就是说大家一定要理解这个点是说

157
00:06:34,600 --> 00:06:35,680
假设

158
00:06:35,840 --> 00:06:39,040
假设我的

159
00:06:39,879 --> 00:06:42,319
假设这是我的最优解

160
00:06:43,120 --> 00:06:45,040
真的是我真正的最优解

161
00:06:46,840 --> 00:06:47,519
就是说

162
00:06:47,519 --> 00:06:49,120
但是你实际上来说

163
00:06:49,120 --> 00:06:50,840
你的数据是有噪音的

164
00:06:51,600 --> 00:06:52,840
就实际上就是说

165
00:06:52,840 --> 00:06:54,000
实际你学的时候

166
00:06:54,000 --> 00:06:55,040
你不会学到这个点

167
00:06:55,040 --> 00:06:56,040
你学不到这个点

168
00:06:56,040 --> 00:06:56,920
就这是你的

169
00:06:56,920 --> 00:06:58,560
假设你是你真正最优点

170
00:06:58,600 --> 00:07:01,399
但是你在真的去学数据学的时候

171
00:07:01,399 --> 00:07:02,600
因为里面有噪音

172
00:07:02,600 --> 00:07:03,879
所以你的

173
00:07:04,640 --> 00:07:05,520
你学的东西

174
00:07:05,520 --> 00:07:06,439
可能在这个地方

175
00:07:06,439 --> 00:07:07,680
可能学的特别大

176
00:07:09,160 --> 00:07:11,200
就你可以看到我们之前代码

177
00:07:11,240 --> 00:07:14,640
我们真正的最优解是0.01W

178
00:07:14,960 --> 00:07:16,640
但我们如果不加L2的话

179
00:07:16,640 --> 00:07:18,439
我们学到的是一个特别大的

180
00:07:18,439 --> 00:07:19,640
一个我们的L2 long

181
00:07:19,640 --> 00:07:21,320
大概是12了

182
00:07:21,560 --> 00:07:23,240
那就是根本就学到一个过大了

183
00:07:23,280 --> 00:07:24,240
这是因为

184
00:07:25,520 --> 00:07:27,720
我们的算法看到的是噪音

185
00:07:27,720 --> 00:07:28,560
他试图去

186
00:07:28,560 --> 00:07:30,000
他只要模型允许的话

187
00:07:30,000 --> 00:07:31,760
我就会去不断的记住我的

188
00:07:31,759 --> 00:07:33,759
选一个选一个全种

189
00:07:33,759 --> 00:07:35,039
记住我所有的样本

190
00:07:35,199 --> 00:07:35,959
那就是说

191
00:07:35,959 --> 00:07:37,759
那就会尝试记住了噪音

192
00:07:38,000 --> 00:07:39,560
记住那些抖动的东西

193
00:07:39,560 --> 00:07:40,959
他就会学到一个特别大的地方

194
00:07:40,959 --> 00:07:42,719
这就是你真正的

195
00:07:43,399 --> 00:07:44,079
学到的

196
00:07:44,079 --> 00:07:45,639
如果没有的是学到的

197
00:07:47,279 --> 00:07:48,639
然后所以你的L2 long

198
00:07:48,639 --> 00:07:49,560
就会把这个东西

199
00:07:49,560 --> 00:07:51,639
你如果没有他的往回拉

200
00:07:52,159 --> 00:07:53,560
就你要通过控制

201
00:07:53,560 --> 00:07:55,480
你这个number的大小来

202
00:07:55,759 --> 00:07:57,360
控制number的大小来

203
00:07:57,360 --> 00:07:59,120
说你要往回拉多少

204
00:07:59,560 --> 00:08:01,599
就是说假设你number的

205
00:08:01,879 --> 00:08:04,199
过小

206
00:08:04,800 --> 00:08:06,680
那么你可能就拉到这个地方

207
00:08:07,920 --> 00:08:09,480
你拉到这个地方

208
00:08:09,599 --> 00:08:11,039
那不够还是太大了

209
00:08:11,039 --> 00:08:12,199
就number的太小

210
00:08:14,560 --> 00:08:16,000
但如果你number的太大的话

211
00:08:16,000 --> 00:08:17,000
你又可能拉到这个地方

212
00:08:17,000 --> 00:08:17,480
对吧

213
00:08:17,759 --> 00:08:18,879
number太大

214
00:08:20,680 --> 00:08:22,279
所以这个地方是说你

215
00:08:22,959 --> 00:08:24,319
合适的number

216
00:08:24,719 --> 00:08:26,439
那可以把你拉到这个地方

217
00:08:26,560 --> 00:08:27,560
所以就是说

218
00:08:27,800 --> 00:08:29,560
这里我们写的是最优解

219
00:08:29,560 --> 00:08:30,480
数学的最优解

220
00:08:30,480 --> 00:08:31,240
实际求解

221
00:08:31,240 --> 00:08:32,399
我们求不到最优解的

222
00:08:32,440 --> 00:08:33,560
因为你数学噪音

223
00:08:33,560 --> 00:08:34,919
所以是说number的

224
00:08:34,919 --> 00:08:36,600
就是说处理你的噪音

225
00:08:36,600 --> 00:08:37,799
假设你没有噪音的话

226
00:08:37,799 --> 00:08:38,879
那你可不需要number

227
00:08:38,919 --> 00:08:43,320
你就不会去overfit到一些奇怪的地方

228
00:08:43,440 --> 00:08:44,680
但是因为实际有噪音

229
00:08:44,680 --> 00:08:46,960
所以这个就是他的原因

230
00:08:53,720 --> 00:08:55,399
对第7个问题

231
00:08:55,399 --> 00:08:56,519
其实是跟之前一样

232
00:08:56,519 --> 00:08:57,200
就是说

233
00:08:57,320 --> 00:08:59,879
他是让w值变得更平均

234
00:08:59,879 --> 00:09:01,240
他其实也不是

235
00:09:01,439 --> 00:09:02,919
他不会让你变得平均

236
00:09:02,919 --> 00:09:04,799
就是往小里拉

237
00:09:04,799 --> 00:09:06,000
就是说防止

238
00:09:06,000 --> 00:09:07,840
就当你没有number

239
00:09:07,840 --> 00:09:10,960
你的学的的w是变得很大的情况下

240
00:09:10,960 --> 00:09:11,720
加入这个东西

241
00:09:11,720 --> 00:09:12,679
你就会往回拉

242
00:09:12,720 --> 00:09:14,000
就他也不是万能的

243
00:09:14,000 --> 00:09:15,039
假设你没有

244
00:09:15,080 --> 00:09:16,799
你的模型没有去overfit的话

245
00:09:16,799 --> 00:09:18,399
那你往回拉是没用

246
00:09:21,759 --> 00:09:23,480
就为了Decay一般有什么选择

247
00:09:23,639 --> 00:09:24,960
就是反正之前讲过

248
00:09:24,960 --> 00:09:25,799
就是你

249
00:09:26,039 --> 00:09:27,240
1-3

250
00:09:27,240 --> 00:09:28,440
1-2

251
00:09:28,440 --> 00:09:29,120
1-4

252
00:09:29,240 --> 00:09:30,679
反正这种三个选项

253
00:09:30,879 --> 00:09:32,560
选一选有效果就行

254
00:09:32,560 --> 00:09:33,879
没效果换一个

255
00:09:33,879 --> 00:09:34,919
换别的方法

256
00:09:34,919 --> 00:09:35,960
反正那个东西

257
00:09:36,000 --> 00:09:37,480
试起来挺简单的

258
00:09:42,679 --> 00:09:43,440
就是说

259
00:09:43,440 --> 00:09:44,320
作为南不达

260
00:09:44,320 --> 00:09:45,480
作为一个超参数

261
00:09:45,480 --> 00:09:48,120
是怎么样调优的

262
00:09:48,200 --> 00:09:49,519
其实是说

263
00:09:51,159 --> 00:09:52,120
就我们也讲过

264
00:09:52,120 --> 00:09:52,960
上一次有讲过

265
00:09:52,960 --> 00:09:54,560
就是说你用验证集

266
00:09:54,560 --> 00:09:56,480
加上比如说K者交传印证

267
00:09:56,480 --> 00:09:57,480
就是说你去看

268
00:09:57,480 --> 00:09:58,120
就是说

269
00:09:58,159 --> 00:10:01,759
确实你不知道什么时候是最有

270
00:10:03,039 --> 00:10:04,080
比如说

271
00:10:04,440 --> 00:10:05,399
最简单的情况

272
00:10:05,600 --> 00:10:06,360
你就是

273
00:10:06,480 --> 00:10:07,759
假设南不达等于0

274
00:10:07,879 --> 00:10:08,800
你试一下

275
00:10:09,159 --> 00:10:10,759
最后的验证的精度

276
00:10:10,759 --> 00:10:11,680
长什么样的

277
00:10:11,680 --> 00:10:12,320
或者你看一下

278
00:10:12,320 --> 00:10:13,159
我们之前曲线

279
00:10:13,279 --> 00:10:14,680
我们之前代码

280
00:10:14,680 --> 00:10:17,399
也多多少少有点调参的意味在里面

281
00:10:17,399 --> 00:10:19,759
就你看一下你训练的线

282
00:10:19,759 --> 00:10:24,000
和一个测试或者验证的线

283
00:10:24,000 --> 00:10:25,480
之间的差距

284
00:10:25,519 --> 00:10:27,360
如果你发现差的比较大

285
00:10:27,480 --> 00:10:28,480
那么你就把

286
00:10:28,600 --> 00:10:29,440
那么的0

287
00:10:29,519 --> 00:10:31,240
如果说你发现差的比较大

288
00:10:31,360 --> 00:10:32,960
那就把它往高调一点

289
00:10:33,000 --> 00:10:33,920
就调个1-3

290
00:10:35,039 --> 00:10:35,560
1-3

291
00:10:35,560 --> 00:10:37,120
如果你确实有一定效果

292
00:10:37,120 --> 00:10:37,960
你又可能

293
00:10:37,960 --> 00:10:39,759
你又可以再往上调一点

294
00:10:39,759 --> 00:10:40,879
调个1-2

295
00:10:41,159 --> 00:10:42,960
如果没有效果

296
00:10:42,960 --> 00:10:44,560
那就这样

297
00:10:44,680 --> 00:10:46,360
那就留着1-3没事

298
00:10:46,560 --> 00:10:48,680
或者你就觉得1-3有一定效果

299
00:10:48,680 --> 00:10:49,720
你不调了也没关系

300
00:10:49,720 --> 00:10:50,519
就是说

301
00:10:51,960 --> 00:10:52,840
那么反过来讲

302
00:10:52,840 --> 00:10:54,800
就是说不会有特别大的用

303
00:10:54,840 --> 00:10:56,879
但是会用的好

304
00:10:56,879 --> 00:10:58,200
有那么一点点好处

305
00:11:04,120 --> 00:11:06,559
就是说在解释噪音数据的时候

306
00:11:06,559 --> 00:11:07,720
如果噪音越大

307
00:11:07,720 --> 00:11:09,159
W就会比较大

308
00:11:09,200 --> 00:11:11,600
这是经验所得还是可以证明

309
00:11:15,720 --> 00:11:16,960
噪音越大的时候

310
00:11:16,960 --> 00:11:18,080
你的你

311
00:11:18,120 --> 00:11:19,559
这个可以试一下

312
00:11:19,559 --> 00:11:20,600
这个是可以证明的

313
00:11:21,559 --> 00:11:23,240
这个东西确实是可以证明的

314
00:11:24,000 --> 00:11:25,200
但是我们这里就不讲

315
00:11:25,200 --> 00:11:25,840
你可以试一下

316
00:11:26,000 --> 00:11:27,280
你就很简单

317
00:11:27,280 --> 00:11:29,680
你就是拿这个弹幕跑一下

318
00:11:29,680 --> 00:11:30,720
你就把噪音调高一点

319
00:11:30,720 --> 00:11:32,519
看看你学的W会不会变大

320
00:11:33,519 --> 00:11:34,040
对吧


1
00:00:00,000 --> 00:00:02,000
好我们接下来讲一下

2
00:00:02,000 --> 00:00:04,000
IoS天代码的实现

3
00:00:04,000 --> 00:00:05,000
跟之前一样

4
00:00:05,000 --> 00:00:07,000
我们先漏掉我们的数据的这一块

5
00:00:07,000 --> 00:00:09,000
这个东西我们都已经看了很多遍了

6
00:00:09,000 --> 00:00:11,000
都是长得一样的

7
00:00:11,000 --> 00:00:15,000
接下来就是说我们实现我们的IoS天

8
00:00:15,000 --> 00:00:18,000
它你可以看到就是说

9
00:00:18,000 --> 00:00:20,000
本质没区别对吧

10
00:00:20,000 --> 00:00:24,000
就是多了多了谁

11
00:00:24,000 --> 00:00:26,000
就多了那么一个东西

12
00:00:26,000 --> 00:00:29,000
就是说别的东西都一样

13
00:00:29,000 --> 00:00:31,000
就是这三个门

14
00:00:31,000 --> 00:00:33,000
这三个门

15
00:00:33,000 --> 00:00:34,000
就之前是两个门

16
00:00:34,000 --> 00:00:35,000
现在变成三个门了

17
00:00:35,000 --> 00:00:37,000
这个东西是这个东西

18
00:00:37,000 --> 00:00:39,000
之前是我直接算HTL打用的

19
00:00:39,000 --> 00:00:42,000
现在变成了算CTL打用的

20
00:00:42,000 --> 00:00:43,000
对吧

21
00:00:43,000 --> 00:00:46,000
所以是说之前家喻是要前面两行

22
00:00:46,000 --> 00:00:47,000
再加后面一行

23
00:00:47,000 --> 00:00:48,000
现在我们中间多了一行

24
00:00:48,000 --> 00:00:53,000
所以说我们从又多了个

25
00:00:53,000 --> 00:00:57,000
比家喻多了33%的东西

26
00:00:57,000 --> 00:00:58,000
别的东西都一样

27
00:00:58,000 --> 00:01:02,000
所以我们就不仔细给大家讲了

28
00:01:02,000 --> 00:01:03,000
初始化

29
00:01:03,000 --> 00:01:04,000
初始化这里不一样

30
00:01:04,000 --> 00:01:07,000
是说我们有两个zero了

31
00:01:07,000 --> 00:01:09,000
就是说你需要H有个初始化

32
00:01:09,000 --> 00:01:11,000
你的C也有个初始化

33
00:01:11,000 --> 00:01:12,000
但是这两个东西长得是

34
00:01:12,000 --> 00:01:15,000
形状上是一样的

35
00:01:15,000 --> 00:01:17,000
然后算的话

36
00:01:17,000 --> 00:01:18,000
算的话其实就是

37
00:01:18,000 --> 00:01:21,000
我们就算也没有太多可以讲的

38
00:01:21,000 --> 00:01:23,000
就是你的I是这么算的

39
00:01:23,000 --> 00:01:24,000
对吧

40
00:01:24,000 --> 00:01:26,000
就是把刚刚那些代码复制几遍

41
00:01:26,000 --> 00:01:30,000
I F O CTL打

42
00:01:30,000 --> 00:01:33,000
就是我们算这些RN里面算

43
00:01:33,000 --> 00:01:35,000
H的公式

44
00:01:35,000 --> 00:01:37,000
然后当前的C就是

45
00:01:37,000 --> 00:01:40,000
F乘以C加上I乘以CTL打

46
00:01:40,000 --> 00:01:44,000
然后你的H就是你的新的状态

47
00:01:44,000 --> 00:01:48,000
就是O就乘以你的做time H对C做

48
00:01:48,000 --> 00:01:51,000
然后最后你的输出就是在H上做的

49
00:01:51,000 --> 00:01:52,000
后面都是一样

50
00:01:52,000 --> 00:01:55,000
这基本上你的唯一的区别就是

51
00:01:55,000 --> 00:01:56,000
这个地方

52
00:01:56,000 --> 00:02:00,000
所以你不管是RN还是GRU

53
00:02:00,000 --> 00:02:02,000
还是LSTM

54
00:02:02,000 --> 00:02:04,000
其实区别就在这个地方

55
00:02:04,000 --> 00:02:06,000
就是说你是怎么样去更新你的H

56
00:02:06,000 --> 00:02:07,000
别的东西都一样

57
00:02:07,000 --> 00:02:08,000
对吧

58
00:02:08,000 --> 00:02:10,000
OK所以就那么几点区别

59
00:02:10,000 --> 00:02:12,000
所以相对来说我们讲了

60
00:02:12,000 --> 00:02:14,000
讲清楚了RN之后

61
00:02:14,000 --> 00:02:15,000
讲清楚RN

62
00:02:15,000 --> 00:02:16,000
讲清楚了GRU之后

63
00:02:16,000 --> 00:02:18,000
讲这里其实比较简单

64
00:02:18,000 --> 00:02:20,000
看一下代码

65
00:02:20,000 --> 00:02:22,000
代码我们也就很快的过一下

66
00:02:22,000 --> 00:02:24,000
基本上还是一样的

67
00:02:24,000 --> 00:02:25,000
就是说但反过来讲

68
00:02:25,000 --> 00:02:26,000
你看到这个训练曲线

69
00:02:26,000 --> 00:02:28,000
就同样的参数训练曲线

70
00:02:28,000 --> 00:02:30,000
没那么快一些

71
00:02:30,000 --> 00:02:31,000
就慢一些

72
00:02:31,000 --> 00:02:33,000
慢一些你也心无可言

73
00:02:33,000 --> 00:02:34,000
对吧

74
00:02:34,000 --> 00:02:36,000
你的东西多了一些

75
00:02:36,000 --> 00:02:37,000
对吧

76
00:02:37,000 --> 00:02:40,000
然后你的性能我们就直接看性能

77
00:02:40,000 --> 00:02:41,000
我们直接看

78
00:02:41,000 --> 00:02:46,000
就框架提供的LSTM cell

79
00:02:46,000 --> 00:02:47,000
就看一看

80
00:02:47,000 --> 00:02:48,000
RN.LSTM

81
00:02:48,000 --> 00:02:52,000
就刚刚是我们就RN.GRU

82
00:02:52,000 --> 00:02:54,000
GRU.RN.LSTM

83
00:02:54,000 --> 00:02:55,000
就这三个区别

84
00:02:55,000 --> 00:02:57,000
别的东西都一样

85
00:02:57,000 --> 00:02:59,000
OK性能性能

86
00:02:59,000 --> 00:03:01,000
大概大概30万

87
00:03:01,000 --> 00:03:02,000
30万之后

88
00:03:02,000 --> 00:03:03,000
其实你会发现

89
00:03:03,000 --> 00:03:04,000
对吧

90
00:03:04,000 --> 00:03:07,000
它比前面好一点

91
00:03:07,000 --> 00:03:09,000
好一点的你也不要太信

92
00:03:09,000 --> 00:03:10,000
好一点

93
00:03:10,000 --> 00:03:11,000
纯粹是因为我觉得

94
00:03:11,000 --> 00:03:14,000
有一定的随机性在里面

95
00:03:14,000 --> 00:03:15,000
所以基本上可以看到

96
00:03:15,000 --> 00:03:18,000
是说在这么小网络

97
00:03:18,000 --> 00:03:20,000
虽然我的计算量增加了

98
00:03:20,000 --> 00:03:22,000
但是会变得会变慢

99
00:03:22,000 --> 00:03:25,000
OK因为这个东西太小

100
00:03:25,000 --> 00:03:28,000
然后GPU上面并行度够好的话

101
00:03:28,000 --> 00:03:31,000
我真的这点小开瞎是可以忽略不计的

102
00:03:31,000 --> 00:03:32,000
所以在实际中

103
00:03:32,000 --> 00:03:34,000
我觉得RN和LSTM

104
00:03:34,000 --> 00:03:36,000
在计算复杂度上

105
00:03:36,000 --> 00:03:38,000
其实都差不多

106
00:03:38,000 --> 00:03:40,000
然后可能一般来说

107
00:03:40,000 --> 00:03:41,000
LSTM还是贵那么一点点

108
00:03:41,000 --> 00:03:43,000
毕竟多一点计算

109
00:03:43,000 --> 00:03:44,000
我们的小网络看不准

110
00:03:44,000 --> 00:03:47,000
所以大家喜欢用这些小网络

111
00:03:47,000 --> 00:03:49,000
去做Benchmark

112
00:03:49,000 --> 00:03:51,000
但是都不准

113
00:03:51,000 --> 00:03:53,000
所以在实际生活中

114
00:03:53,000 --> 00:03:54,000
你要用的话

115
00:03:54,000 --> 00:04:01,000
我的建议是GRU LSTM都没关系

116
00:04:01,000 --> 00:04:03,000
都差不多效果

117
00:04:03,000 --> 00:04:05,000
性能上也差不多

118
00:04:05,000 --> 00:04:06,000
当然说LSTM

119
00:04:06,000 --> 00:04:08,000
它的模型参数多那么一点点

120
00:04:08,000 --> 00:04:09,000
但是实际情况下

121
00:04:09,000 --> 00:04:12,000
你也看不出太多的差别

122
00:04:12,000 --> 00:04:14,000
所以目前公认来说

123
00:04:14,000 --> 00:04:18,000
GRU和LSTM性能上是差不多的东西

124
00:04:18,000 --> 00:04:20,000
所以你在用的时候

125
00:04:20,000 --> 00:04:21,000
用谁都行

126
00:04:21,000 --> 00:04:23,000
反正在你改代码情况下

127
00:04:23,000 --> 00:04:26,000
就是一个把GRU改成LSTM

128
00:04:26,000 --> 00:04:28,000
但反过来说

129
00:04:28,000 --> 00:04:30,000
LSTM稍微复杂那么一点点

130
00:04:30,000 --> 00:04:32,000
就模型多那么一点点

131
00:04:32,000 --> 00:04:34,000
所以相对来说

132
00:04:34,000 --> 00:04:36,000
长那么一点点


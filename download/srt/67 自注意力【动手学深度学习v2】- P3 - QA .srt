1
00:00:00,000 --> 00:00:02,160
代码我稍微给大家讲一下

2
00:00:02,280 --> 00:00:03,919
就是说很快的给大家过一下

3
00:00:03,919 --> 00:00:05,799
自注意力和位置编码的代码

4
00:00:05,919 --> 00:00:08,640
代码基本上就是刚刚那个东西的实现

5
00:00:09,240 --> 00:00:11,080
就是核心是说

6
00:00:11,599 --> 00:00:13,040
我们先不管这一个

7
00:00:13,359 --> 00:00:14,519
核心是这个类

8
00:00:14,679 --> 00:00:16,240
因为我们之后会用到这个类

9
00:00:16,280 --> 00:00:18,280
就叫position encoding的类

10
00:00:18,920 --> 00:00:19,679
它干嘛

11
00:00:19,839 --> 00:00:22,280
它就是说你告诉我一个hidden

12
00:00:22,400 --> 00:00:24,480
number of hidden就是那个p

13
00:00:24,480 --> 00:00:25,800
就是那个向量长度

14
00:00:26,280 --> 00:00:28,080
然后当你告诉我一个最长长度是什么

15
00:00:28,160 --> 00:00:29,960
就是说你告诉我最长的序列是1000

16
00:00:29,960 --> 00:00:30,360
比如说

17
00:00:31,120 --> 00:00:32,359
然后你怎么办

18
00:00:32,480 --> 00:00:35,520
就是说你的主要工作是生成p

19
00:00:35,760 --> 00:00:37,280
就把p给生成出来

20
00:00:37,880 --> 00:00:39,439
生成出来就是这个东西

21
00:00:39,439 --> 00:00:41,200
也就是你就照着公式操

22
00:00:41,439 --> 00:00:42,719
就是它是一个

23
00:00:42,960 --> 00:00:44,160
它batch size是等于1

24
00:00:45,160 --> 00:00:46,719
然后就max length

25
00:00:46,960 --> 00:00:48,520
然后就是n

26
00:00:48,680 --> 00:00:50,960
然后这个是p或者d

27
00:00:51,320 --> 00:00:53,320
就是一个这样

28
00:00:53,320 --> 00:00:54,680
就每一行就是

29
00:00:54,680 --> 00:00:57,640
就你不看batch size的话

30
00:00:57,679 --> 00:00:58,679
每一行就是一个样本

31
00:00:59,200 --> 00:01:00,480
每一列就是一个特征

32
00:01:00,960 --> 00:01:02,120
然后你就是

33
00:01:02,480 --> 00:01:05,200
你就是把这一个函数

34
00:01:05,200 --> 00:01:06,359
就是把range

35
00:01:06,359 --> 00:01:07,680
就说白了就是用power

36
00:01:07,879 --> 00:01:09,040
记得那个东西怎么算的

37
00:01:09,439 --> 00:01:10,480
就那个公式

38
00:01:10,519 --> 00:01:12,760
然后你最后就sine和cosine

39
00:01:12,760 --> 00:01:14,879
就这个东西就不给大家仔细讲了

40
00:01:15,240 --> 00:01:16,960
公式你实现出来

41
00:01:17,480 --> 00:01:18,879
你forward的时候

42
00:01:20,480 --> 00:01:21,760
就给一个x

43
00:01:22,159 --> 00:01:23,519
它是加上p

44
00:01:24,120 --> 00:01:25,439
但是说你的batch size

45
00:01:25,439 --> 00:01:26,719
反正是你不管多少

46
00:01:26,719 --> 00:01:27,280
我就是1

47
00:01:27,280 --> 00:01:28,519
反正我就broadcasting了

48
00:01:28,799 --> 00:01:29,239
对吧

49
00:01:29,719 --> 00:01:32,319
第二个是说你的长度

50
00:01:32,519 --> 00:01:33,519
等价也是说

51
00:01:33,519 --> 00:01:34,599
我不管你多少

52
00:01:34,599 --> 00:01:35,560
只要你不超过1000

53
00:01:35,560 --> 00:01:36,480
我都是可以给你的

54
00:01:36,480 --> 00:01:36,920
对吧

55
00:01:37,359 --> 00:01:38,680
然后就取决你的长度

56
00:01:38,879 --> 00:01:40,159
最后你的dimension你不能变

57
00:01:40,200 --> 00:01:41,439
你告诉我是number of hindrances

58
00:01:41,439 --> 00:01:42,079
就不能变

59
00:01:42,400 --> 00:01:42,640
当然

60
00:01:42,640 --> 00:01:44,359
然后我要放到你的device上面

61
00:01:44,519 --> 00:01:45,120
这样子

62
00:01:45,359 --> 00:01:46,120
另外一个是说

63
00:01:46,120 --> 00:01:47,640
你看到有个dropout在里面

64
00:01:47,840 --> 00:01:51,120
就是说它x加上你的encoding之后

65
00:01:51,599 --> 00:01:55,519
它使用一个dropout来避免说

66
00:01:55,560 --> 00:01:58,000
你这个模型

67
00:01:58,159 --> 00:02:01,439
就是对p这个东西太过于敏感

68
00:02:01,599 --> 00:02:02,079
OK

69
00:02:02,079 --> 00:02:04,239
所以就是加了一个regression在里面

70
00:02:05,079 --> 00:02:07,439
别的东西基本上都没什么

71
00:02:07,959 --> 00:02:08,719
就刚刚那个图

72
00:02:08,719 --> 00:02:09,519
我们怎么画出来

73
00:02:09,519 --> 00:02:11,639
就是把那个p拿出来

74
00:02:11,960 --> 00:02:12,960
就把这个p拿出来

75
00:02:12,960 --> 00:02:13,919
然后给你画一画

76
00:02:14,120 --> 00:02:15,439
别的东西都是

77
00:02:15,479 --> 00:02:16,639
就下面几个东西

78
00:02:16,639 --> 00:02:18,479
都是我们刚刚science讲的这种图

79
00:02:18,719 --> 00:02:20,560
就是binary encoding

80
00:02:20,560 --> 00:02:21,759
就这个图是怎么画的

81
00:02:21,800 --> 00:02:23,120
就是把这个p

82
00:02:23,759 --> 00:02:24,960
画一个p的map

83
00:02:25,520 --> 00:02:25,880
OK

84
00:02:25,880 --> 00:02:27,080
就长成这个样子了

85
00:02:27,439 --> 00:02:28,000
OK

86
00:02:28,159 --> 00:02:29,760
所以我们这个地方

87
00:02:29,760 --> 00:02:31,439
就是给大家稍微讲一下

88
00:02:31,439 --> 00:02:33,160
这个class长什么样子

89
00:02:33,160 --> 00:02:34,680
因为我们之后要用

90
00:02:35,040 --> 00:02:35,800
具体的实现

91
00:02:35,800 --> 00:02:38,600
反正我们也就是照着公式操了

92
00:02:38,920 --> 00:02:40,320
当然是说你说

93
00:02:40,360 --> 00:02:41,560
为什么要用这个东西

94
00:02:41,719 --> 00:02:43,760
为什么它具体取1000取10000

95
00:02:44,560 --> 00:02:46,719
里面怎么说

96
00:02:47,160 --> 00:02:48,280
几十个操算数了

97
00:02:48,280 --> 00:02:49,520
但是在之后的birth

98
00:02:49,520 --> 00:02:50,560
大家发现说

99
00:02:50,680 --> 00:02:52,920
好像你也没必要搞成这样子

100
00:02:53,200 --> 00:02:54,640
可以让他可以学也可以

101
00:02:54,640 --> 00:02:55,920
我们之后会给大家讲到

